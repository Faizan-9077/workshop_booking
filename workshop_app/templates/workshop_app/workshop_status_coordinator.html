{% extends "workshop_app/base.html" %}
{% load static %}

{% block title %}
    My Workshops
{% endblock %}

{% block extra-dependencies %}
    <link rel="stylesheet" href="{% static 'workshop_app/css/workshop_status_coordinator.css' %}">
{% endblock %}

{% block content %}
    {% if not workshops %}
        <div class="container py-5">
            <div class="empty-state text-center mx-auto">
                <div class="empty-illustration mb-3">
                    <i class="bi bi-calendar2-x display-5 text-secondary"></i>
                </div>
                <h4 class="fw-bold mb-2">No workshops to show</h4>
                <p class="text-muted mb-4">When you propose or are assigned workshops, they will appear here.</p>
                <div class="d-flex justify-content-center gap-2 flex-wrap">
                    <a href="{% url 'workshop_app:propose_workshop' %}" class="btn btn-primary">
                        <i class="bi bi-plus-circle me-1"></i> Propose a Workshop
                    </a>
                    <a href="{% url 'statistics_app:public' %}" class="btn btn-outline-secondary">
                        <i class="bi bi-bar-chart me-1"></i> View Statistics
                    </a>
                </div>
            </div>
        </div>
    {% else %}
        <h3 class="text-center page-title">The status of your workshops</h3>
        <br>

        <!-- Accepted Workshops -->
<div class="container">
    <h3 class="text-center table-heading"><strong>Workshops Accepted</strong></h3>
    <div class="table-wrap shadow-sm">
        <table class="table table-hover mb-0">
            <thead>
                <tr>
                    <th>Workshop Name</th>
                    <th>Instructor Name</th>
                    <th>Workshop Day</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for workshop in workshops %}
                    {% if workshop.status %}
                    <tr>
                        <td data-label="Workshop Name">
                            <a href="{% url 'workshop_app:workshop_details' workshop.id %}">
                                {{ workshop.workshop_type|capfirst }}
                            </a>
                        </td>
                        <td data-label="Instructor Name">{{ workshop.instructor.get_full_name }}</td>
                        <td data-label="Workshop Day">{{ workshop.date|date }}</td>
                        <td data-label="Status">
                            <span class="badge bg-success">{{ workshop.get_status }}</span>
                        </td>
                    </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Proposed Workshops -->
<div class="container mt-4">
    <h3 class="text-center table-heading"><strong>Workshops Proposed By Me</strong></h3>
    <div class="table-wrap shadow-sm">
        <table class="table table-hover mb-0">
            <thead>
                <tr>
                    <th>Workshop Name</th>
                    <th>Workshop Day</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for workshop in workshops %}
                    {% if not workshop.status and workshop.tnc_accepted %}
                    <tr>
                        <td data-label="Workshop Name">
                            <a href="{% url 'workshop_app:workshop_details' workshop.id %}">
                                {{ workshop.workshop_type|capfirst }}
                            </a>
                        </td>
                        <td data-label="Workshop Day">{{ workshop.date|date }}</td>
                        <td data-label="Status">
                            <span class="badge bg-warning text-dark">{{ workshop.get_status }}</span>
                        </td>
                    </tr>
                    {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

    {% endif %}
{% endblock %}
